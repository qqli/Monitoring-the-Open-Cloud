\section{Proposed Approach}
\label{sec:ProposedApproach}

%\input{../LatexShared/Section3-Subsection1-DataCollectionRetention.tex}

%\subsection{Data Transformation and Visualization}
We will start this project by performing an evaluation of existing full-fledged solutions for monitoring different cloud layers and doing more literature analysis. Then we will compare existing virtual monitoring solutions such as Ceilometer and StackTach. 
Our approach for realizing the data transformation and visualization phase of the project involves the following tasks: 1) identifying the types of queries to be supported, this is critical to optimize the data base to support these queries efficiently, 2) filtering and transforming the data to support these queries, which will involve correlating data from the different layers of the system, 3) developing a privacy preserving API that allows users to access the data remotely, and finally 5) developing an end-user tool that exposes the information to users.  

We will address these tasks in an agile fashion, where we develop a simple visualization tool and use it to iteratively refine the types of queries needed, the transformation of the data, the API, etc…  

We will identify the types of queries needed by a combination of: 1) the needs of our end user visualization tool, 2) discussions with the industry partners of the MOC, and 3) discussions with researchers that would plan to build tools that use the data.  We expect to continuously refine the queries supported as the other tasks are developed. 

As we identify important queries to support, we will  filter and transform the collected data to support those queries efficiently.  This task depends not only on the specifics of the queries, but also the optimization opportunities available, and will involve exploring the relavent research.   This task will also involve correlating data from different layers monitored by different monitoring tools. For example, information of physical machines’ conditions is useful to end-users only if it is correlated with the information about the virtual resources of that user. So we will need to develop a mapping of users’ virtual resources with physical resources that they utilized.  Just as with the previous task, we expect this task to be highly iterative.  In some cases, the transformations will involve changes in how data is collected, in other cases they will involve creation of new datasets. 

We will develop a user API that allows users to query the data in databases using pre-defined queries. An API is critical to avoid giving end-users direct access to the monitoring databases.  It will also provide us with a level of indirection, where we can change the underlying databases and schemas without changing the tools that use the API.  The API will need to protect user privacy while still providing valuable information to end users.  End users will only be able to see the information of their own projects, which contains information of physical resources that are related to their projects only, and they may need. To enable single sign-on, the service that supports the API we will implement will integrate with the cloud authentication services.

To exercise and refine the platform, we will develop an end-user tool that visualizes both the status of the cloud, and user specific utilization of the cloud. As there are many metrics of the cloud to show, and the data can be instantaneous as well as historical, we need to explore open source visualization tools (e.g. Grafana) and develop a solution that shows the data in a clear and valuable format to end users. 


% During this phase, we will extend the platform we built by filtering and transforming the retained data and by providing an API  for efficient queries and an end-user tool that can visualize the status of the cloud as well as user specific utilization of the cloud. Along with the project, we will put effort in solving the problems we proposed in problem statement section. 

% The first challenge is how to ensure scalability for serving many queries. It is expensive to do queries in large data set. Cui et al. ~\cite{cuiusing} state that without optimizations, complex queries, such as correlation detection, on large time series data take tens of minutes to be done. So we need to do proper filtering and transforming with the data collected from the cloud in order to make more efficient queries. We will first do more research into this field and find out the optimization possibilities in order to support scalability. As for a start, we plan to aggregate single compute node utilizations to whole cluster’s compute node utilization and to aggregate  instantaneous utilization data to average utilization data within a time range. 

% Second, we need to correlate data from different layers monitored by different monitoring tools. The data from some layers are more useful to users and researchers when being correlated with the data from other layers. For example, information of physical machines’ conditions will be more utilizable to users if they are correlated with users’ virtual machines information. So we will develop a mapping of users’ virtual resources with physical resources that they utilized. 

% Third, we need to decide to what extent we can expose the information and also ensure the security of the cloud. It would be a threat to the cloud if we grant everyone direct access to databases, and also it would not be an efficient way, for the reason that we may have several databases and we will have a large data set. We will develop a user API to allow users to query the data in databases with the queries pre-defined by us. The queries will be carefully designed through the studying of users’ demands (e.g: price, performance, energy efficiency and time,etc…).

% Fourth, we need to protect user privacy while still providing valuable information. As stated above, we will have a mapping of users’ virtual resources with physical resources they utilized. End users can only see the information of their own projects, which contains information of physical resources that are related to their projects only, and they may need to sign agreements that they won’t share the details with other users. We will need to write programs that can talk to authentication services, such as Keystone in OpenStack. 

% Last but not the least, to exercise and refine the platform, we will develop an end-user tool that visualizes both the status of the cloud, and user specific utilization of the cloud. As there are many metrics of the cloud to show, and the data can be instantaneous as well as historical, we need to explore open source visualization tools, for example Grafana and develop a solution that show the data in a clear form and also provide valuable information to users. 



